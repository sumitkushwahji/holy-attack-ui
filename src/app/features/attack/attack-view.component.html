<div class="attack-view-container" *ngIf="!isLoading">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <p class="loading-text">Preparing your splash attack...</p>
    </div>
  </div>

  <!-- Main Attack View -->
  <div *ngIf="!isLoading && attackData" class="main-attack-view">
    <!-- Cinematic Splash Area (70vh) -->
    <div class="splash-container">
      <!-- Dark Cinematic Overlay -->
      <div class="cinematic-overlay" 
           [ngClass]="{'fade-out': !showOverlay, 'fade-in': showOverlay}"
           *ngIf="showOverlay">
        <div class="overlay-content">
          <div class="countdown-container" *ngIf="showCountdown">
            <div class="countdown-text">{{ countdownNumber }}</div>
            <div class="countdown-label">Get ready...</div>
          </div>
          <div class="pre-splash-message" *ngIf="!showCountdown">
            <h2 class="splash-title">{{ attackData.attackerName }} is attacking!</h2>
            <div class="color-preview" [style.background-color]="attackData.color"></div>
          </div>
        </div>
      </div>

      <!-- Canvas Area -->
      <div class="canvas-container">
        <div class="canvas-placeholder">
          <!-- Actual uploaded image -->
          <div class="target-image-container" *ngIf="attackImageUrl || (attackData && attackData.imageUrl)">
            <img 
              [src]="attackImageUrl || (attackData ? attackData.imageUrl : '')" 
              [alt]="'Target image for ' + (attackData ? attackData.attackerName : 'Anonymous')"
              class="target-image"
              (error)="onImageLoadError($event)">
          </div>
          
          <!-- Fallback placeholder -->
          <div class="target-image-placeholder" *ngIf="!attackImageUrl && (!attackData || !attackData.imageUrl)">
            ğŸ¯ Target Image Area
          </div>
          
          <div class="splash-effects" [ngClass]="{'active': splashActive}">
            <!-- Splash animation effects will go here -->
            <div class="color-splash" [style.background-color]="attackData.color"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom UI Panel -->
    <div class="bottom-panel">
      <!-- Attacker Message (with scale-in animation) -->
      <div class="message-container" 
           [ngClass]="{'scale-in': showMessage}" 
           *ngIf="showMessage">
        <div class="attacker-message">
          <div class="message-bubble">
            <div class="message-emoji">ğŸ’¥</div>
            <div class="message-text">
              <strong>{{ attackData.attackerName }}</strong> splashed you with 
              <span class="color-name" [style.color]="attackData.color">{{ getColorName(attackData.color) }}</span>!
            </div>
            <div class="message-subtitle">You've been digitally colored! ğŸ¨</div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons" [ngClass]="{'visible': showButtons}">
        <div class="primary-actions">
          <button 
            (click)="attackBack()"
            class="cinematic-button primary">
            <span class="button-icon">ğŸ¯</span>
            <span class="button-text">ATTACK BACK!</span>
          </button>
        </div>
        
        <div class="secondary-actions">
          <button 
            (click)="shareAttack()"
            class="cinematic-button secondary">
            <span class="button-icon">ğŸ“±</span>
            <span class="button-text">Share</span>
          </button>
          
          <button 
            (click)="goToLeaderboard()"
            class="cinematic-button secondary">
            <span class="button-icon">ğŸ†</span>
            <span class="button-text">Leaderboard</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && !attackData" class="error-state">
    <div class="error-content">
      <div class="error-icon">ğŸ˜•</div>
      <h2 class="error-title">Attack Not Found</h2>
      <p class="error-message">
        This attack link might be invalid or expired.
      </p>
      <button 
        (click)="attackBack()"
        class="cinematic-button primary">
        <span class="button-icon">ğŸ </span>
        <span class="button-text">Go Home</span>
      </button>
    </div>
  </div>
</div>